<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Fluttr Protoype</title>
    <link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.4/jquery.mobile-1.4.4.min.css">
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="https://code.jquery.com/mobile/1.4.4/jquery.mobile-1.4.4.min.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="style2.css">
</head>
<body>
    <div id="container" class="container">
        <div class="col-sm"></div>
        <div class="col-sm">
        <!-- <div id="buddy-holder"> -->
        <div class="buddy active" style="display: block;" name="buddy0">
            <div class="titleCon">
                <p class="title">Jason Lund, 16
                <i class="fas fa-info-circle" style="padding-left: 120px;"></i></p>
            </div>
            <div class="avatar card1" style="display: block; background-image: url('images/jason.png');"></div>
            <p class="caption">“I’m ready to give up everything<br>for the girl I love.”  </p> 
        </div>
        <div class="buddy" name="buddy1">
            <div class="titleCon">
                <p class="title">Soroya
                <i class="fas fa-info-circle" style="padding-left: 175px;"></i></p>
            </div>
            <div class="avatar card3" style="display: block; background-image: url('images/soroya.jpg');"></div>
            <p class="caption">“It's complicated,<br>I'm complicated!”</p>
        </div>  
        <div class="buddy" name="buddy2">
            <div class="titleCon">
                <p class="title">Darius
                <i class="fas fa-info-circle" style="padding-left: 180px;"></i></p>
            </div>
            <div class="avatar card4" style="display: block; background-image: url('images/darius.jpg'); background-position: center;"></div>
            <p class="caption">“You can call me baby”</p>
        </div> 
        <div id="match" class="buddy" name="buddy3">
            <div class="titleCon">    
                <p class="title">Karina Harris, 16
                <i class="fas fa-info-circle" style="padding-left: 110px;"></i></p>
            </div>
            <div class="avatar card2" style="display: block; background-image: url('images/karina.jpg');"></div>
            <p class="caption">“I’ve got the best of both worlds<br>
                (human and engkanto). Your ultimate dream girl!”</p>
        </div> 
        <!-- </div> end of buddy-holder !         -->
    </div>
        <div class="fluttrBtn text-center">
            <a href=""><img src="images/dislike.png" class="dislikeBtn"></a>
            <a href=""><img src="images/like.png" class="likeBtn"></a>
            <!-- additional note: lalaki ung button everytime mattrigger ung swipe -->
        </div>
        <!-- <div class="likeAction"></div>
        <div class="dislikeAction"></div> -->
    <div class="col-sm"></div>
</div>
<script>

function showCaptionAfterLast(time){
    setTimeout(function(){
    $('.caption').show();
    },time);
}
//dynamic
var characters = [
    'jason',
    'soroya',
    'darius',
    'karina'
];

// function getUrlParameter(name) {
//     name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
//     var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
//     var results = regex.exec(location.search);
//     return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
// };

$(document).ready(function(){

    // console.log("ID is: " + getUrlParameter("id"));
    // var c = $("#buddy-holder").children();
    // var id = getUrlParameter("id");

    // $(c[0]).addClass("active");

    // if(id == ""){
    //     $('#buddy-holder').find('.status').remove();
    // }else{
    //     $('.buddy').hide();
    //     $(c[parseInt(id)]).css("display", "block");
    //     $(parseInt(id)).addClass("active");
    // }


    // console.log(c);


$(".buddy").on("click", function(){
    // console.log($(this).attr("name"));

    var index = $(this).attr("name");
    index = index.substr(5);

    window.location = characters[index] + "Bio" + ".html";
})

$(".buddy").on("swiperight",function(){
    $(this).addClass('rotate-left').delay(700);
    $('.buddy').find('.status').remove();
    $(this).append('<div class="status like">Love it!</div>');  
    // $('img, .like').each(function(){
    //     $(this).width ( $(this).width () * 0.8) );
    //     $(this).height( $(this).height() * 0.8) );
    // });
    $('.caption', this).hide();
    $(this).removeClass('active');

    if ( $(this).is(':last-child') ) {
    $('.buddy:nth-child(1)').removeClass('rotate-left rotate-right').addClass('active').fadeIn(1100);      
    showCaptionAfterLast(1100);
    } else {
        $(this).next().removeClass('rotate-left rotate-right').addClass('active').fadeIn(1600);
    }
});  

$(".buddy").on("swipeleft",function(){
    $(this).addClass('rotate-right').delay(700);
    $('.buddy').find('.status').remove();
    $(this).append('<div class="status dislike">Not for me!</div>');
    $('.caption', this).hide();
    $(this).removeClass('active');

    if ( $(this).is(':last-child') ) {
    $('.buddy:nth-child(1)').removeClass('rotate-left rotate-right').addClass('active').fadeIn(1100);
    showCaptionAfterLast(1100);
    } else {
        $(this).next().removeClass('rotate-left rotate-right').addClass('active').fadeIn(1600);
    } 
});

// Btn controls
// $('.fluttrBtn .likeBtn').on('click', function() {
//     $activeBuddy = $('.buddy.active');
//     $activeBuddy.addClass('rotate-left').delay(700);
//     $('.buddy').find('.status').remove();
//     $activeBuddy.append('<div class="status like">Love it!</div>');  
//     $activeBuddy.find('.caption').hide();
//     $activeBuddy.removeClass('active');

//     if ( $activeBuddy.is(':last-child') ) {
//     $('.buddy:nth-child(1)').removeClass('rotate-left rotate-right').addClass('active').fadeIn(1100);      
//     showCaptionAfterLast(1100);
//     } else {
//         $activeBuddy.next().removeClass('rotate-left rotate-right').addClass('active').fadeIn(1600);
//     }
// });

// $('.fluttrBtn .dislikeBtn').on('click', function() {
//     $activeBuddy = $('.buddy.active');
//     $activeBuddy.addClass('rotate-right').delay(700);
//     $('.buddy').find('.status').remove();
//     $activeBuddy.append('<div class="status dislike">Not for me!</div>');  
//     $activeBuddy.find('.caption').hide();
//     $activeBuddy.removeClass('active');

//     if ( $activeBuddy.is(':last-child') ) {
//     $('.buddy:nth-child(1)').removeClass('rotate-left rotate-right').addClass('active').fadeIn(1100);      
//     showCaptionAfterLast(1100);
//     } else {
//         $activeBuddy.next().removeClass('rotate-left rotate-right').addClass('active').fadeIn(1600);
//     }
// });

$('.fluttrBtn .likeBtn').on('click', function() {
    $('.buddy.active').trigger('swiperight');
});
$('.fluttrBtn .dislikeBtn').on('click', function() {
    $('.buddy.active').trigger('swipeleft');
});

    $("#match").on( "swiperight", swiperightHandler );
    function swiperightHandler( event ){
    window.location.href = "match.html";
    }
});
</script>
</body>
</html>